<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Receitas</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="./styles/geral.css">
  <link rel="stylesheet" href="./styles/receitas.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <a href="#main-receitas" class="visually-hidden">Conte√∫do Principal</a>

  <!-- NAVBAR -->
    <header class="topbar">
      <div class="nav-container">
        <nav class="nav-links">
          <a href="inicio.html">Home</a>
          <a href="receitas.html">Receitas</a>
          <a href="planeador.html">Planeamento de refei√ß√µes</a>
        </nav>
      <a href="utilizador.html" class="user-circle">
          <img id="user-profile-img" src="./imagens/logo.png" alt="Foto do utilizador">
        </a>
      </div>
    </header>

    <main class="container page" id="main-receitas">
      <section class="page-header">
        <div class="page-title">
          <h1>Receitas</h1>
          <p>Encontra receitas por tempo, dificuldade e prefer√™ncias.</p>
        </div>
        <form class="search" role="search">
          <input type="search" placeholder="Pesquisar receitas..." />
          <button type="submit">üîç</button>
        </form>
      </section>

      <section class="filters">
        <div class="filter-group">
          <label for="selectTempo">Tempo</label>
          <select id="selectTempo">
            <option>Qualquer</option>
            <option>At√© 15 min</option>
            <option>At√© 30 min</option>
            <option>At√© 60 min</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="selectDificuldade">Dificuldade</label>
          <select id="selectDificuldade">
            <option>Qualquer</option>
            <option>F√°cil</option>
            <option>M√©dio</option>
            <option>Dif√≠cil</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="selectOrdem">Ordenar</label>
          <select id="selectOrdem">
            <option>Mais recentes</option>
            <option>Mais r√°pidas</option>
            <option>Mais popular</option>
          </select>
        </div>
        <button class="btn-clear">Limpar</button>
      </section>

      <div class="cards"></div>
    </main>

    <!-- SO ADMIN  !!!!!! -->
    <div class="add-recipe-wrapper" id="addRecipeWrapper" style="display: none;">
      <button class="add-recipe-btn" id="btnOpenAddRecipeModal">
        + Adicionar receita
      </button>
    </div>

    
    <div class="modal fade" id="recipeDetailModal" tabindex="-1" aria-labelledby="recipeDetailModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title" id="recipeDetailModalLabel" style="font-size: 18px;">Detalhes da Receita</h2>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="text-center mb-4">
              <img id="modalRecipeImage" class="img-fluid rounded shadow-sm" 
                  alt="Imagem da receita" 
                  style="max-height: 280px; object-fit: cover;">
            </div>

            <h3 id="modalRecipeName" class="mb-3"></h3>

            <div class="row g-3 mb-4 text-muted small">
              <div class="col-4">
                <strong>Tempo:</strong><br>
                <span id="modalRecipeTime"></span> minutos
              </div>
              <div class="col-4">
                <strong>Dificuldade:</strong><br>
                <span id="modalRecipeDifficulty"></span>
              </div>
              <div class="col-4">
                <strong>Tipo:</strong><br>
                <span id="modalRecipeGenre"></span>
              </div>
            </div>

            <h4 class="mt-4 mb-2 fw-bold" style="font-size: 16px;">Prepara√ß√£o</h4>
            <div id="modalRecipeInstructions" class="text-dark" style="white-space: pre-line; line-height: 1.6;"></div>

            <div class="mt-4 pt-3 border-top small text-muted">
              Por: <span id="modalRecipeChef"></span>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Fechar</button>
            <button type="button" class="btn btn-danger" id="btnDeleteRecipe" style="display: none;">Remover Receita</button>
          </div>
        </div>
      </div>
    </div>


    <div class="modal fade" id="addRecipeModal" tabindex="-1" aria-labelledby="addRecipeModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addRecipeModalLabel">Adicionar Nova Receita</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="addRecipeForm">
              <div class="row g-3">
                <div class="col-md-8">
                  <label for="recipeName" class="form-label">Nome da receita *</label>
                  <input type="text" class="form-control" id="recipeName" required>
                </div>
                <div class="col-md-4">
                  <label for="recipeTime" class="form-label">Tempo (min) *</label>
                  <input type="number" class="form-control" id="recipeTime" min="5" required>
                </div>

                <div class="col-md-6">
                  <label for="recipeDifficulty" class="form-label">Dificuldade *</label>
                  <select class="form-select" id="recipeDifficulty" required>
                    <option value="">Escolha...</option>
                    <option value="F√°cil">F√°cil</option>
                    <option value="M√©dio">M√©dio</option>
                    <option value="Dif√≠cil">Dif√≠cil</option>
                  </select>
                </div>

                <div class="col-md-6">
                  <label for="recipeGenre" class="form-label">Tipo / G√©nero</label>
                  <input type="text" class="form-control" id="recipeGenre" placeholder="ex: Peixe, Carne, Sobremesa...">
                </div>

                <div class="col-12">
                  <label for="recipeChef" class="form-label">Chef / Autor</label>
                  <select class="form-select" id="recipeChef" required>
                    <option value="">Selecione um chef...</option>
                    
                  </select>
                  <small class="form-text text-muted mt-1">
                    N√£o encontras o chef? Podes escrever um novo nome (opcional):
                  </small>
                  <input type="text" class="form-control mt-1" id="newChefName" placeholder="Novo chef (opcional)">
                </div>

                <div class="col-12">
                  <label for="recipeImage" class="form-label">URL da imagem (opcional)</label>
                  <input type="url" class="form-control" id="recipeImage" placeholder="./imagens/placeholder.jpg">
                </div>

                <div class="col-12">
                  <label for="recipeInstructions" class="form-label">Instru√ß√µes *</label>
                  <textarea class="form-control" id="recipeInstructions" rows="5" required></textarea>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="button" class="btn btn-primary" id="btnSubmitRecipe">Adicionar Receita</button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./js/storage.js"></script>
    <script src="./js/admin-access.js"></script>
    <script src="./js/receitas.js"></script>
    <script src="./js/profile.js"></script>
</body>
</html>